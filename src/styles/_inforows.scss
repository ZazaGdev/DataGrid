/**
 * Info Rows Styles
 * Styles for informational rows (e.g., header info rows, period labels)
 */

@use "variables" as *;

// ============================================
// Info Row Base
// ============================================

.dg-row-info-row {
  background-color: var(--dg-color-bg);
  font-size: var(--dg-font-size-sm);
  color: var(--dg-color-text-muted);
  cursor: default;

  &:hover {
    background-color: var(--dg-color-bg); // No hover effect
  }

  // Indent info-row content
  .dg-cell:first-child {
    padding-left: calc(var(--dg-cell-padding-x) + var(--dg-spacing-lg));

    &::before {
      content: "";
      display: inline-block;
      width: 8px;
      height: 8px;
      margin-right: var(--dg-spacing-sm);
      border-left: 1px solid var(--dg-color-border-strong);
      border-bottom: 1px solid var(--dg-color-border-strong);
      vertical-align: middle;
    }
  }

  // Info-row cells are typically read-only
  .dg-cell {
    background-color: var(--dg-color-bg);

    &.dg-cell-fixed {
      background-color: var(--dg-color-bg);
    }
  }
}

// ============================================
// Info Row Indicator (visual connector)
// ============================================

.dg-row-data + .dg-row-info-row {
  border-top: 1px dashed var(--dg-color-border);
}

.dg-row-info-row + .dg-row-info-row {
  // Consecutive info-rows
}

.dg-row-info-row + .dg-row-data {
  // Info-row followed by data row
  border-top: 1px solid var(--dg-color-border-strong);
}

// ============================================
// Info Row Types
// ============================================

// Informational info-row (dates, periods, etc.)
.dg-row-info-row.dg-info-row-info {
  background-color: #fafbfc;

  .dg-cell {
    background-color: inherit;
    font-style: italic;
  }
}

// Detail info-row (additional data)
.dg-row-info-row.dg-info-row-detail {
  background-color: var(--dg-color-bg-alt);

  .dg-cell {
    background-color: inherit;
  }
}

// Summary info-row (subtotals)
.dg-row-info-row.dg-info-row-summary {
  background-color: var(--dg-color-bg-alt);
  font-weight: var(--dg-font-weight-medium);

  .dg-cell {
    background-color: inherit;
    border-top: 1px solid var(--dg-color-border-strong);
  }
}

// ============================================
// Expandable Info Rows
// ============================================

.dg-row-data.dg-has-info-rows {
  .dg-cell:first-child {
    position: relative;
    padding-left: calc(var(--dg-cell-padding-x) + 1.5rem);
  }
}

.dg-info-row-toggle {
  position: absolute;
  left: var(--dg-cell-padding-x);
  top: 50%;
  transform: translateY(-50%);
  width: 1.25rem;
  height: 1.25rem;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 10px;
  color: var(--dg-color-text-muted);
  cursor: pointer;
  border-radius: var(--dg-border-radius);
  @include dg-transition(color, background-color);

  &:hover {
    color: var(--dg-color-primary);
    background-color: var(--dg-color-primary-light);
  }

  &.dg-expanded {
    transform: translateY(-50%) rotate(90deg);
  }
}

// ============================================
// Info Row Visibility
// ============================================

.dg-info-rows-collapsed {
  .dg-row-info-row {
    display: none;
  }
}

.dg-row-info-row.dg-info-row-hidden {
  display: none;
}

// ============================================
// Info Row Nesting Levels
// ============================================

.dg-row-info-row[data-level="1"] {
  .dg-cell:first-child {
    padding-left: calc(var(--dg-cell-padding-x) + var(--dg-spacing-lg));
  }
}

.dg-row-info-row[data-level="2"] {
  .dg-cell:first-child {
    padding-left: calc(var(--dg-cell-padding-x) + var(--dg-spacing-lg) * 2);
  }
}

.dg-row-info-row[data-level="3"] {
  .dg-cell:first-child {
    padding-left: calc(var(--dg-cell-padding-x) + var(--dg-spacing-lg) * 3);
  }
}

// ============================================
// Info Row with Timeline (for date-based info-rows)
// ============================================

.dg-row-info-row.dg-info-row-timeline {
  .dg-cell:first-child {
    position: relative;

    &::before {
      content: "";
      position: absolute;
      left: calc(var(--dg-cell-padding-x) + 0.5rem);
      top: 0;
      bottom: 0;
      width: 1px;
      background-color: var(--dg-color-border-strong);
    }

    &::after {
      content: "";
      position: absolute;
      left: calc(var(--dg-cell-padding-x) + 0.25rem);
      top: 50%;
      transform: translateY(-50%);
      width: 6px;
      height: 6px;
      background-color: var(--dg-color-bg);
      border: 1px solid var(--dg-color-border-strong);
      border-radius: 50%;
    }
  }

  // First timeline info-row
  &:first-of-type .dg-cell:first-child::before {
    top: 50%;
  }

  // Last timeline info-row
  &:last-of-type .dg-cell:first-child::before,
  &:has(+ .dg-row-data) .dg-cell:first-child::before {
    bottom: 50%;
  }
}

// ============================================
// Info Row (informational header row at top of tbody)
// This is the primary info row class used for header information
// ============================================

.dg-row-info {
  background-color: var(--dg-color-bg-alt);
  font-size: var(--dg-font-size-sm);
  font-weight: var(--dg-font-weight-medium);
  color: var(--dg-color-text-muted);
  cursor: default;

  &:hover {
    background-color: var(--dg-color-bg-alt); // No hover effect
  }

  .dg-cell {
    background-color: var(--dg-color-bg-alt);
    border-bottom: 1px solid var(--dg-color-border-strong);

    &.dg-cell-fixed {
      background-color: var(--dg-color-bg-alt);
    }
  }
}
